# Data Model: Foundation

**Date**: 2026-02-08

## Entities

### Task (Backend-managed)

| Field | Type | Constraints | Notes |
|-------|------|-------------|-------|
| id | INTEGER | PK, Auto-increment | Database-generated sequence |
| user_id | TEXT | FK → user.id, NOT NULL, Indexed | CASCADE on delete |
| title | VARCHAR(200) | NOT NULL, min 1 char | Validated by Pydantic |
| description | TEXT | Nullable, max 1000 chars | Optional field |
| completed | BOOLEAN | NOT NULL, Default FALSE, Indexed | Toggle via PATCH |
| created_at | TIMESTAMP | NOT NULL, Default NOW() UTC | Set once, never changes |
| updated_at | TIMESTAMP | NOT NULL, Default NOW() UTC | Refreshed on every update |

**Table name**: `tasks`
**Indexes**: `idx_tasks_user_id`, `idx_tasks_completed`, `idx_tasks_created_at`

### User (Better Auth-managed, read-only for backend)

| Field | Type | Constraints | Notes |
|-------|------|-------------|-------|
| id | TEXT | PK | Generated by Better Auth |
| email | TEXT | Unique, NOT NULL | |
| name | TEXT | NOT NULL | From signup |
| emailVerified | BOOLEAN | Default FALSE | camelCase (Better Auth convention) |
| image | TEXT | Nullable | |
| createdAt | TIMESTAMP | Default NOW() | camelCase |
| updatedAt | TIMESTAMP | Default NOW() | camelCase |

**Table name**: `user` (singular, Better Auth convention)
**Managed by**: Better Auth — backend NEVER writes to this table

### Session (Better Auth-managed)
Auto-created by Better Auth. Not accessed directly by backend code.

### Account (Better Auth-managed)
Auto-created by Better Auth. Not accessed directly by backend code.

## Relationships

```
user (1) ──── (N) tasks
  │                  │
  PK: id ◄────── FK: user_id
  │                  │
  ON DELETE ───► CASCADE (all user's tasks deleted)
```

## Data Shapes (Pydantic/SQLModel)

| Shape | Used For | Fields |
|-------|----------|--------|
| TaskBase | Shared base | title, description |
| TaskCreate | POST body | title (required), description (optional) |
| TaskUpdate | PUT body | title (optional), description (optional) |
| TaskResponse | All responses | id, user_id, title, description, completed, created_at, updated_at |
| Task (table) | DB operations | All fields, table=True |

## Validation Rules

- Title: 1-200 characters, required on create, optional on update
- Description: 0-1000 characters, optional
- Completed: boolean, defaults to False, toggled via dedicated endpoint
- Timestamps: UTC, auto-managed, never user-settable
